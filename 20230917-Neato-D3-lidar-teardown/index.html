<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Outside ![[Pasted image 20230918075520.png]] ![[Pasted image 20230918075533.png]]
Inside This is actually upside down with respect to the ground I think:"><title>Harry dB notes</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://Oscilllator.github.io/quartz//icon.png><link href=https://Oscilllator.github.io/quartz/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://Oscilllator.github.io/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://Oscilllator.github.io/quartz/js/darkmode.9b46d81b9b161bfac149d66dfa6b3812.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://Oscilllator.github.io/quartz/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://Oscilllator.github.io/quartz/",fetchData=Promise.all([fetch("https://Oscilllator.github.io/quartz/indices/linkIndex.b2290a32c0aa701e112c13bbe54792d4.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://Oscilllator.github.io/quartz/indices/contentIndex.164b5f166d47e28d1195758cd3b06c8b.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://Oscilllator.github.io/quartz",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://Oscilllator.github.io/quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/Oscilllator.github.io\/quartz\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://Oscilllator.github.io/quartz/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://Oscilllator.github.io/quartz/>Harry dB notes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Last updated
Unknown
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/20230917%20Neato%20D3%20lidar%20teardown.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#baseboard-side>Baseboard side:</a></li><li><a href=#communications>Communications</a></li><li><a href=#tx-photons>Tx (Photons)</a></li></ol><ol><li><ol><li><a href=#its-a-serial-thing>It&rsquo;s a serial thing</a></li></ol></li></ol><ol><li><a href=#power-transfer>Power transfer</a></li></ol></nav></details></aside><a href=#outside><h1 id=outside><span class=hanchor arialabel=Anchor># </span>Outside</h1></a><p><img src="/quartz/Pasted image 20230918075520.png" width=auto>
<img src="/quartz/Pasted image 20230918075533.png" width=auto></p><a href=#inside><h1 id=inside><span class=hanchor arialabel=Anchor># </span>Inside</h1></a><p>This is actually upside down with respect to the ground I think:</p><p><img src="/quartz/Pasted image 20230918075824.png" width=auto></p><p>The Tx is in an oddly long enclosure. Overall this bears a <em>striking</em> resemblance to an RP-lidar that I&rsquo;ve seen previously:</p><p><img src="/quartz/Pasted image 20230918080130.png" width=auto></p><a href=#baseboard-side><h2 id=baseboard-side><span class=hanchor arialabel=Anchor># </span>Baseboard side:</h2></a><p><img src="/quartz/Pasted image 20230918080346.png" width=auto></p><p>You can see here a tx led and an rx photodiode. The opposite side has the same thing, so presumably they operate at a bit different wavelength with a bandpass filter on the photodiode. You can buy photodiodes with bandpass filters for pretty cheap for stuff like TV remotes.</p><a href=#communications><h2 id=communications><span class=hanchor arialabel=Anchor># </span>Communications</h2></a><p>I was going to leave the teardown at that but there&rsquo;s actually an extremely convenient and labelled 0.1" header strip located on the spinning board:
<img src="/quartz/Pasted image 20230918080439.png" width=auto>
I soldered to this and powered it on and it drew around 20mA of current. Spinning the lidar by hand you can see that there are around a dozen encoder pulses per revolution. I suspected that there was a laser safety interlock style thing preventing it from operating any further, so I provided a fake encoder signal via the waveform generator on my scope and the lidar immediately began to draw 200mA, which was very encouraging.
Sadly still no light coming out of the Tx, though. I can connect to the tx with a bench supply from the connector of course and verified that it was outputting in the infrared using a realsense camera (which has no IR filter on it).</p><a href=#tx-photons><h2 id=tx-photons><span class=hanchor arialabel=Anchor># </span>Tx (Photons)</h2></a><p>Here is he &ldquo;VTX&rdquo; labelled waveform on oscilloscope:</p><p><img src="/quartz/Pasted image 20230917194416.png" width=auto></p><p>Green: fake encoder
Pink: Tx signal
Shining light on the rx with the emitter of a realsense didn&rsquo;t get anything to happen.
Here is the firing behaviour of the laser: once on each encoder edge:</p><p><img src="/quartz/Pasted image 20230917194545.png" width=auto></p><p>Nice and simple! This only seems to happen for a limited range of encoder frequencies, and there&rsquo;s also some hysteresis where if you power cycle the unit while applying an encoder signal it might go from no lock->a lock. I was hoping that when the tx firing synced itself to the encoder edges that would indicate that the firmware was happy and begin firing, but this appears not to be the case. It probably requires an extremely specific encoder frequency to get things to work and I can&rsquo;t be bothered with all that.</p><a href=#tx-comms><h1 id=tx-comms><span class=hanchor arialabel=Anchor># </span>Tx (comms)</h1></a><p>Ir picture of data being sent out:</p><p><img src="/quartz/Pasted image 20230917202458.png" width=auto></p><p>Extremely terrible trace from a photodiode measuringthe tx light:</p><p><img src="/quartz/Pasted image 20230917203538.png" width=auto></p><p>Given that it&rsquo;s taking a measurement once per encoder edge it seems pretty clear that it&rsquo;s just sending out the distance it receives each time. Maybe the distance is encoded as a pulse width, maybe it&rsquo;s some kind of serial thing.</p><a href=#its-a-serial-thing><h3 id=its-a-serial-thing><span class=hanchor arialabel=Anchor># </span>It&rsquo;s a serial thing</h3></a><p>Taking the thing apart a little further exposes the tx led. The waveform looks like this:</p><p><img src="/quartz/Pasted image 20230917204707.png" width=auto></p><p>It&rsquo;s changing all the time, but it&rsquo;s not clear if it&rsquo;s a distance measurement.</p><p>Anyway, I still can&rsquo;t get the laser to fire. I&rsquo;m sure that there&rsquo;s some encoder speed based laser safety thing going on here where if the motor is spinning at the exact right speed the laser will fire and won&rsquo;t otherwise.</p><a href=#rx-photons><h1 id=rx-photons><span class=hanchor arialabel=Anchor># </span>Rx (photons)</h1></a><p>Interestingly the lens has at least two elements to it:
.<div style=float:left;padding:2px><img src="/quartz/Pasted image 20230918081359.png" width=200></div><br><div style=float:left;padding:2px><img src="/quartz/Pasted image 20230918081431.png" width=200></div></p><div style=clear:both></div>The actual Photo-whatever itself is stuck behind epoxied on screws and I can't get to it for the moment. The RP-lidar looked like this though:<p><img src="/quartz/Pasted image 20230918082940.png" width=auto></p><p>Which is a lidar CMOS sensor. Given the angle between the Tx and the Rx (notice they are bent together slightly in above pics) the position of the spot on the sensor indicates how far away something is:</p><p><img src="/quartz/Pasted image 20230918083336.png" width=auto></p><p>Since a lens is an object that transforms the incoming angle of light to a location at the focal plane.</p><a href=#power-transfer><h2 id=power-transfer><span class=hanchor arialabel=Anchor># </span>Power transfer</h2></a><p>here is the RF coil that transfers power across the gap:</p><p><img src="/quartz/Pasted image 20230918081135.png" width=auto></p><p>I have attached it here to some coax like so:</p><p><img src="/quartz/Pasted image 20230918081215.png" width=auto></p><p>So as to be able to measure the Bode plot using my oscilloscope:</p><p><img src="/quartz/Pasted image 20230918073936.png" width=auto></p><p>23dB of gain. Something something turns ratio.</p><p><img src="/quartz/Pasted image 20230918074257.png" width=auto></p><p>This is indeed a &ldquo;real&rdquo; measurement, when I take the coils out from each other the peak disappears.
Sanity check measurement where I put in a single frequency at 1.6MHz:</p><p><img src="/quartz/Pasted image 20230918074618.png" width=auto></p><p>Noice.
Interestingly, when I take the ferrite core out nothing much seems to change. Maybe that only has an effect under load or something?</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/quartz// data-ctx="20230917 Neato D3 lidar teardown.md" data-src=/ class=internal-link>Harry dB notes</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://Oscilllator.github.io/quartz/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Harry dB using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2025</p><ul><li><a href=https://Oscilllator.github.io/quartz/>Home</a></li></ul></footer></div></div></body></html>