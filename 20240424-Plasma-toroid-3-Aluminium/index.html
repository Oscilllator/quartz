<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="New PCB looks like this and is made of Aluminium:
![[Pasted image 20240425201500.png]]
It turns out that when you buy an Aluminium PCB and put vias in it, the vias don&rsquo;t actually connect the top layer to the ground plane."><title>Harry dB notes</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://Oscilllator.github.io/quartz//icon.png><link href=https://Oscilllator.github.io/quartz/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://Oscilllator.github.io/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://Oscilllator.github.io/quartz/js/darkmode.9b46d81b9b161bfac149d66dfa6b3812.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://Oscilllator.github.io/quartz/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://Oscilllator.github.io/quartz/",fetchData=Promise.all([fetch("https://Oscilllator.github.io/quartz/indices/linkIndex.cf4bce597ed1deaca322331d43bf8ecf.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://Oscilllator.github.io/quartz/indices/contentIndex.04378f905788159464b958eaaa8cc31d.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://Oscilllator.github.io/quartz",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://Oscilllator.github.io/quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/Oscilllator.github.io\/quartz\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://Oscilllator.github.io/quartz/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://Oscilllator.github.io/quartz/>Harry dB notes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Last updated
Unknown
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/20240424%20Plasma%20toroid%203%20Aluminium.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><ol><li><a href=#retuned-circuit>Retuned circuit:</a></li></ol></li><li><a href=#fixed-power-supply-analyse-usage>Fixed power supply, analyse usage</a></li><li><a href=#magnetic-field-measurement-adventures>Magnetic field measurement adventures</a><ol><li><a href=#main-coil-field>Main coil field</a></li><li><a href=#perpendicular-to-main-coil-field>Perpendicular to main coil field</a></li></ol></li><li><a href=#decoupling-cap>Decoupling cap:</a><ol><li><a href=#perpendicular-to-decoupling-cap>Perpendicular to decoupling cap:</a></li><li><a href=#power-supply-current>Power supply current:</a></li></ol></li><li><a href=#voltage-measurement-of-decoupling>Voltage measurement of decoupling</a><ol><li><a href=#1-ground-to-ground>1: ground to ground</a></li><li><a href=#2-ground-to-ground--10mm-of-wire>2: ground to ground + 10mm of wire</a></li><li><a href=#3-power---10mm-of-wire>3: Power - 10mm of wire</a></li><li><a href=#4-power>4: Power</a></li></ol></li></ol></nav></details></aside><p>New PCB looks like this and is made of Aluminium:</p><p><img src="/quartz/Pasted image 20240425201500.png" width=auto></p><p>It turns out that when you buy an Aluminium PCB and put vias in it, the vias don&rsquo;t actually connect the top layer to the ground plane. I discovered however that the legs of a PCB mount SMA connector can be snapped off and hammered into the 1mm holes, and then soldered to. This makes a fine connection.</p><a href=#retuned-circuit><h3 id=retuned-circuit><span class=hanchor arialabel=Anchor># </span>Retuned circuit:</h3></a><p>I use my <a href=/quartz/20240321-Agilent-6675A rel=noopener class=internal-link data-src=/quartz/20240321-Agilent-6675A>brand spanking &ldquo;new&rdquo;</a> power supply to power the half bridges. This worked fine but I never seemed to hit resonance for some reason. So I popped the LC off and put it on the VNA, then dialed the variable capacitor in so the resonance was exactly 10MHz:</p><p><img src="/quartz/Pasted image 20240424214420.png" width=auto></p><p>After that I tried to solder to the half bridge with the power supply on, and the half bridge blew up. So did the power supply. What a tragedy.</p><a href=#fixed-power-supply-analyse-usage><h2 id=fixed-power-supply-analyse-usage><span class=hanchor arialabel=Anchor># </span>Fixed power supply, analyse usage</h2></a><p>Now I have things back up and running. I noticed that there was a large change (>10deg) in the temp of the MOSFET with a small change in the input frequency from the signal generator. I had initially attributed this to the resonant frequency of the LC, but the fact that only the low side mosfet changed temperature made me suspicious. Here is a screenshot of the half bridge operating at &rsquo;low power':</p><p><img src="/quartz/Pasted image 20240511082031.png" width=auto></p><ul><li>Yellow: High side gate</li><li>Blue: Half bridge midpoint</li><li>Purple: low side gate</li><li>Green: EM field from a loop nearby</li><li>Maths: High side gate - Half bridge output (Low side gate voltage)
And at &lsquo;High power&rsquo;:</li></ul><p><img src="/quartz/Pasted image 20240511082331.png" width=auto></p><p>So it seems there is some kind of shoot through happening. Some more observations:</p><ul><li>The magnitude of the EM field did actually increase, but not nearly commensurate with the rise in power dissipation (The current from the supply like doubled here)</li><li>I checked, and there is little time delay between CH1 and CH2 here</li><li>The higher frequency wibbles most obvious on CH1 are highly dependent on local meat placement.I can almost make the &ldquo;shoot through&rdquo; disappear from moving my hand around.</li><li>The voltage on the gates would suggest that there should be no shoot through at all.</li><li></li></ul><p>Some more experiments. Here is 9.54MHz, where things look completely sane:</p><p><img src="/quartz/Pasted image 20240511082850.png" width=auto></p><p>And 9.44MHz, completely wack:</p><p><img src="/quartz/Pasted image 20240511082959.png" width=auto></p><p>Further down at 9.3MHz, slightly more sane (?):</p><p><img src="/quartz/Pasted image 20240511083059.png" width=auto></p><p>I wonder where this ringing is coming from. If I can solve that this might solve the issue. In the past power supply decoupling at been a wee bit of an issue so I shall probe the power supply rail. That turns out to have 5vpk-pk ripples in it but I think that&rsquo;s more or less par for the course at this kind of di/dt, and there doesn&rsquo;t seem to be an obvious relationship between the ripples and the 80MHz ripples above. Instead I suspect that it is some other LC oscillation in my circuit, though I don&rsquo;t know where it could be coming from. To test this I detuned things down to where it looks like a nice square wave, then tuned the variable capacitor (with pliers, lest I be burned) and this actually seems to be a good strategy. I get 800mVpk-pk on my field here with the FET&rsquo;s sitting at a cruisy 45C. Time to switch over to the big boi power supply and crank the voltage!</p><p><img src="/quartz/Pasted image 20240511085032.png" width=auto></p><a href=#magnetic-field-measurement-adventures><h2 id=magnetic-field-measurement-adventures><span class=hanchor arialabel=Anchor># </span>Magnetic field measurement adventures</h2></a><p>One of the things that I noticed correlated well with the increased power consumption was harmonics/ringing happening on the output waveform:
<img src="/quartz/Pasted image 20240513080030.png" width=auto></p><p>I it was hard to tell where this was coming from. Moving my hand around over the coil influences the amplitude quite a lot. So I made a magnetic probe thingo (loop of wire) to try and find out where things were coming from. Here are 4 measurements:</p><a href=#main-coil-field><h3 id=main-coil-field><span class=hanchor arialabel=Anchor># </span>Main coil field</h3></a><p><img src="/quartz/Pasted image 20240513080213.png" width=auto></p><p><img src="/quartz/Pasted image 20240513080238.png" width=auto></p><a href=#perpendicular-to-main-coil-field><h3 id=perpendicular-to-main-coil-field><span class=hanchor arialabel=Anchor># </span>Perpendicular to main coil field</h3></a><p><img src="/quartz/Pasted image 20240513080341.png" width=auto></p><p><img src="/quartz/Pasted image 20240513080319.png" width=auto></p><a href=#decoupling-cap><h2 id=decoupling-cap><span class=hanchor arialabel=Anchor># </span>Decoupling cap:</h2></a><p><img src="/quartz/Pasted image 20240513080455.png" width=auto></p><p><img src="/quartz/Pasted image 20240513080420.png" width=auto></p><a href=#perpendicular-to-decoupling-cap><h3 id=perpendicular-to-decoupling-cap><span class=hanchor arialabel=Anchor># </span>Perpendicular to decoupling cap:</h3></a><p><img src="/quartz/Pasted image 20240513080518.png" width=auto></p><p><img src="/quartz/Pasted image 20240513080548.png" width=auto></p><a href=#power-supply-current><h3 id=power-supply-current><span class=hanchor arialabel=Anchor># </span>Power supply current:</h3></a><p><img src="/quartz/Pasted image 20240513080939.png" width=auto></p><p><img src="/quartz/Pasted image 20240513080913.png" width=auto></p><p>The vscale on the field measurement is the same in all the pics here obviously. So it seems like a bit clue here that the decoupling is somehow the issue. Obviously the current that created the voltage on the output of the half bridge had to come from somewhere and that somewhere was the decoupling cap. So it could technically be caused by something else,and I am just measuring the supply current to it. But I shall investigate in this direction anyway for lack of anything else to do.</p><a href=#voltage-measurement-of-decoupling><h2 id=voltage-measurement-of-decoupling><span class=hanchor arialabel=Anchor># </span>Voltage measurement of decoupling</h2></a><p>Because I did not do things properly, the wires for my decoupling caps are attached with wires to ground and to power:</p><p><img src="/quartz/Pasted image 20240513081752.png" width=auto></p><a href=#1-ground-to-ground><h3 id=1-ground-to-ground><span class=hanchor arialabel=Anchor># </span>1: ground to ground</h3></a><p><img src="/quartz/Pasted image 20240513081434.png" width=auto></p><a href=#2-ground-to-ground--10mm-of-wire><h3 id=2-ground-to-ground--10mm-of-wire><span class=hanchor arialabel=Anchor># </span>2: ground to ground + 10mm of wire</h3></a><p><img src="/quartz/Pasted image 20240513081605.png" width=auto></p><a href=#3-power---10mm-of-wire><h3 id=3-power---10mm-of-wire><span class=hanchor arialabel=Anchor># </span>3: Power - 10mm of wire</h3></a><p><img src="/quartz/Pasted image 20240513081843.png" width=auto></p><a href=#4-power><h3 id=4-power><span class=hanchor arialabel=Anchor># </span>4: Power</h3></a><p><img src="/quartz/Pasted image 20240513081934.png" width=auto></p><p>Note that all of these were measured referenced to a bolt ground hole positioned just under the (1) indicator. Obviously on this PCB the ground abstraction is utterly broken. But, measured with respect to a ground hole just to the upper left of (4) VCC looks about the same.</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/quartz// data-ctx="20240424 Plasma toroid 3 Aluminium.md" data-src=/ class=internal-link>Harry dB notes</a></li><li><a href=/quartz/20240321-Agilent-6675A/ data-ctx="blew up" data-src=/20240321-Agilent-6675A class=internal-link></a></li><li><a href=/quartz/20240522-Plasma-toroid-4-decoupling/ data-ctx=Previously data-src=/20240522-Plasma-toroid-4-decoupling class=internal-link></a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://Oscilllator.github.io/quartz/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Harry dB using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2025</p><ul><li><a href=https://Oscilllator.github.io/quartz/>Home</a></li></ul></footer></div></div></body></html>