<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Instead of having a class whatever oscillator with zero voltage switching nonsense to not blow up the FET, how about a simple push pull half bridge to drive the LC oscillator directly:"><title>Harry dB notes</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://Oscilllator.github.io/quartz//icon.png><link href=https://Oscilllator.github.io/quartz/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://Oscilllator.github.io/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://Oscilllator.github.io/quartz/js/darkmode.9b46d81b9b161bfac149d66dfa6b3812.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://Oscilllator.github.io/quartz/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://Oscilllator.github.io/quartz/",fetchData=Promise.all([fetch("https://Oscilllator.github.io/quartz/indices/linkIndex.2b44337d7ffb2d39bd0a597d9e15c1af.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://Oscilllator.github.io/quartz/indices/contentIndex.76c83461293733c0506b1433829f01b0.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://Oscilllator.github.io/quartz",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://Oscilllator.github.io/quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'â€™':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/Oscilllator.github.io\/quartz\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://Oscilllator.github.io/quartz/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://Oscilllator.github.io/quartz/>Harry dB notes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Last updated
Unknown
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/20240306%20plasma%20toroid%202.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#pop>*Pop*</a></li><li><a href=#higher-frequency>Higher frequency.</a><ol><li><a href=#coax-dielectric>coax dielectric</a></li></ol></li><li><a href=#failure-under-high-load->Failure under high load /?</a></li></ol></nav></details></aside><p>Instead of having a class whatever oscillator with zero voltage switching nonsense to not blow up the FET, how about a simple push pull half bridge to drive the LC oscillator directly:</p><p><img src="/quartz/Pasted image 20240306195043.png" width=auto></p><p>Something a little like this:</p><p><img src="/quartz/Pasted image 20240306195108.png" width=auto></p><p>The only trouble I had with this was finding a gate driver that claimed to be able to switch fast enough. <a href=/quartz/20240208-plasma-toroid#new-circuit rel=noopener class=internal-link data-src=/quartz/20240208-plasma-toroid>previously</a> the FET driver would smoke out after a few seconds of operation.</p><p>The PCB looks like this:</p><p><img src="/quartz/Pasted image 20240306195458.png" width=auto></p><p>Anyway, after lowing up the FET driver once and resoldering, I get this:</p><p><img src="/quartz/Pasted image 20240306195239.png" width=auto></p><p>Green is high side FET gate, cyan is low side FET gate, yellow is middle of the half bridge, maths is top FET gate - middle of half bridge (so the gate-source voltage of the top FET). And finally purple is after the inductor.
So now all that needs to be done is crank up the frequency to the frequency of the purple oscillations, and bam! plasma toroid.</p><a href=#pop><h2 id=pop><span class=hanchor arialabel=Anchor># </span>*Pop*</h2></a><p>aaand it died. once I changed the resistors r12 and R13 that limited the current from power to ground, it worked for a little bit and then died, killing the top FET and the LMG1210. I resoldered new ones on and replaced the resistors with 1.4R resistors, which will hopefully act like fuses. I also changed the bootstrap cap:</p><p><img src="/quartz/Pasted image 20240308072339.png" width=auto></p><p>I calculated that I needed 10nF from the datasheet, but it looks like even 50nF is not even close to enough. I wonder why the voltage on the gate of the FET is decaying over time? I desoldered the connection to the gate ofthe FET and measured the resistance to the source, it is open circuit as you would expect.</p><p>After changing the bootstrap cap to 1uF I get this waveform:</p><p><img src="/quartz/Pasted image 20240308072907.png" width=auto></p><p>&mldr;The <em>low side</em> drive changed to only be 1us long?!??! Time to go read the datasheet&mldr;</p><p><img src="/quartz/Pasted image 20240307204728.png" width=auto></p><p>&mldr;</p><p>&mldr;</p><p>The reason why the gate voltage was decaying over time was that I had a 1kR resistor with a 50R resistor as a probe to ground so I could scope the voltage on the gate.</p><a href=#higher-frequency><h2 id=higher-frequency><span class=hanchor arialabel=Anchor># </span>Higher frequency.</h2></a><p>Now things work fine. But after cranking the frequency of the AWG up from 10kHz to 560kHz the top side FET stops being driven halfway through the cycle:</p><p><img src="/quartz/Pasted image 20240309122330.png" width=auto></p><p>This time the voltage on the gate is clearly not decaying over time, so it&rsquo;s really not clear what the source of the issue is.</p><p>I set up the waveform generator for a 1MHz burst with 35 cycles:</p><p><img src="/quartz/Pasted image 20240309123102.png" width=auto></p><p>So clearly it actually is the gate voltage that is sagging here. I noticed also on the thermal camera that the bootstrap diode was getting a workout in:</p><p><img src="/quartz/Pasted image 20240309123320.png" width=auto></p><p>so this might have something to do with it. Back to the datasheet!</p><p><img src="/quartz/Pasted image 20240309125204.png" width=auto></p><p>The reverse recovery time of my diode from the pantry (SM4001PL):</p><p><img src="/quartz/Pasted image 20240309125135.png" width=auto></p><p>hmmm&mldr;.. I have no other diodes though. I do have a BFR106, a 20GHz NPN transistor. wiring it as a diode does not seem to work well though. Weird considering
<a href=https://electronics.stackexchange.com/questions/556997/recovery-of-transistor-wired-as-diode rel=noopener>this</a> rather good post would suggest that transistors don&rsquo;t have much of a reverse recovery time. I do have some buck converters though, and they do have shottkey diodes in them:</p><p><img src="/quartz/Pasted image 20240309131307.png" width=auto></p><p><img src="/quartz/Pasted image 20240309131523.png" width=auto></p><p>Bam! continuous operation at 1MHz, no problem.</p><p>The resistors seem to be heating up a tad though:</p><p><img src="/quartz/Pasted image 20240309131718.png" width=auto></p><p>I want to be <em>reallly</em> sure that everything is working well and there is not shoot through or anything on the circuit.</p><p>The falling edge seems fine, but on the rising edge here there looks like there is negative dead time:
<img src="/quartz/Pasted image 20240309132004.png" width=auto></p><p>20ns is the same as what the datasheet says the <em>maximum</em> dead time is. suspicious.</p><p><img src="/quartz/Pasted image 20240309132755.png" width=auto></p><p>&mldr;actually I have things wrong, this looks fine. Although it doesn&rsquo;t quite look like what the datasheet has:</p><p><img src="/quartz/Pasted image 20240309132854.png" width=auto>
&mldr;actually though it looks like Tphl is about the same as TdHl. Diagram should have a &ldquo;not to scale!&rdquo;.</p><p>Cranking things all the way up to 11MHz we get this:</p><p><img src="/quartz/Pasted image 20240309133602.png" width=auto></p><p>so the resistors are at 120C. I paid for the whole thermal range and I&rsquo;m gonna use it. The bottom FET is at 60C though which is worrying. we aren&rsquo;t even switching any load yet.</p><p>Since there are actual resistors that are drawing actual current, we can probe across them to get an idea of when exactly the current is being drawn to see if it is an an appropriate time etc:</p><p><img src="/quartz/Pasted image 20240309140946.png" width=auto></p><p>This is a bit complicated but you can see from the difference between the purple and orange traces that there is clearly current flowing on the rising and falling edges of the middle of the two FET&rsquo;s. That&rsquo;s just the expected transient time when the MOSFET is in an intermediary state I guess, not much can be done other than to switch to a GANFET or something.</p><p>Previously the board was just floating in the air. I taped it down to a chunk of aluminium with some thermal paste in the middle, that reduced the temperature of the FET&rsquo;s to 40C. the circuit is already drawing 380mA/5W though. If the mosfets heat up by 20C from drawing 5W, that does not bode well for putting 60W into them. So I reduced the power rail from 12 to 7V going forward, hopefully that will limit the current draw a bunch when attached to the actual coil.</p><a href=#coax-dielectric><h3 id=coax-dielectric><span class=hanchor arialabel=Anchor># </span>coax dielectric</h3></a><p>The 0603 100pF capacitors were getting <em>really</em> hot, as were the film caps. So I got 100pF worth of coax cable and added it on instead. It still got a bit warm though, so I don&rsquo;t know that overall it was a huge improvement in terms of increasing the Q of the circuit. It mostly just spread out the heat dissipation I think.
108pF worth:
<img src="/quartz/Pasted image 20240309161159.png" width=auto></p><a href=#failure-under-high-load-><h2 id=failure-under-high-load-><span class=hanchor arialabel=Anchor># </span>Failure under high load /?</h2></a><p>Under conditions right next to optimal tuning the circuit starts to turn on/off intermittently like this:</p><p><img src="/quartz/Pasted image 20240309172135.png" width=auto></p><p>it&rsquo;s not 100% related to frequency or anything, I don&rsquo;t really know what the root cause is. But I notice that the lower gate drive pulse is quite narrow.</p><p>Zooming in and doing maths gets this:</p><p><img src="/quartz/Pasted image 20240309172323.png" width=auto></p><p>That&rsquo;s my interpretation of the high side gate drive. I think what needs to be done now perhaps is to reduce the dead times.</p><p>I added a 100k pot in series with the 20k resistor that sets the dead time and swept it back and forth. whilst it did adjust the dead time, it did not seem to make a difference with the above short pulse. Changing the duty cycle of the awg from 50% to 40% did seem to do something though, and after a bit more twiddling I burnt the sma connecter right off the board:</p><p><img src="/quartz/Pasted image 20240309181307.png" width=auto></p><p>oh well.</p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/quartz// data-ctx="20240306 plasma toroid 2.md" data-src=/ class=internal-link>Harry dB notes</a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://Oscilllator.github.io/quartz/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Harry dB using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, Â© 2025</p><ul><li><a href=https://Oscilllator.github.io/quartz/>Home</a></li></ul></footer></div></div></body></html>