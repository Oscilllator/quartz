<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="Trying to build a plasma toroid following this guide:
 https://docs.google.com/document/d/1AyaO-RaTiaOmyT3-89UxPdrMHEBCCrxb1irZKsVMg_8/edit https://docs.google.com/document/d/1-jMPQOSs6-Flp181TTa8cNMSs2XumzDEahg9DVD0hKk/edit
Here is the circuit in LT spice:
![[Pasted image 20240208194901."><title>Harry dB notes</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://Oscilllator.github.io/quartz//icon.png><link href=https://Oscilllator.github.io/quartz/styles.708c2658f93e3a9d323a1f9fded8f4b2.min.css rel=stylesheet><link href=https://Oscilllator.github.io/quartz/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://Oscilllator.github.io/quartz/js/darkmode.9b46d81b9b161bfac149d66dfa6b3812.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/util.9825137f5e7825e8553c68ce39ac9e44.min.js></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://unpkg.com/@floating-ui/core@0.7.3></script>
<script src=https://unpkg.com/@floating-ui/dom@0.5.4></script>
<script src=https://Oscilllator.github.io/quartz/js/popover.9b72b70bd35617d0635e9d15463662b2.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/code-title.b35124ad8db0ba37162b886afb711cbc.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/clipboard.c20857734e53a3fb733b7443879efa61.min.js></script>
<script src=https://Oscilllator.github.io/quartz/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const BASE_URL="https://Oscilllator.github.io/quartz/",fetchData=Promise.all([fetch("https://Oscilllator.github.io/quartz/indices/linkIndex.d02d931c6fba027a42e53219ec259de9.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://Oscilllator.github.io/quartz/indices/contentIndex.beffb511b05a78b3194247d211e56d9c.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,s=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://Oscilllator.github.io/quartz",!0,!0);const o=document.getElementById("footer");if(o){const e=document.getElementById("graph-container");if(!e)return requestAnimationFrame(render);e.textContent="";const t=s&&!1;drawGraph("https://Oscilllator.github.io/quartz",t,[{"/moc":"#4388cc"}],t?{centerForce:1,depth:-1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.5,linkDistance:1,opacityScale:3,repelForce:1,scale:1.4}:{centerForce:1,depth:1,enableDrag:!0,enableLegend:!1,enableZoom:!0,fontSize:.6,linkDistance:1,opacityScale:3,repelForce:2,scale:1.2})}},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'’':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/Oscilllator.github.io\/quartz\/js\/router.9d4974281069e9ebb189f642ae1e3ca2.min.js"
    attachSPARouting(init, render)
  </script></head><script async src="https://www.googletagmanager.com/gtag/js?id=G-XYFD95KB4J"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XYFD95KB4J",{anonymize_ip:!1})}</script><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://Oscilllator.github.io/quartz/js/full-text-search.24827f874defbbc6d529926cbfcfb493.min.js></script><div class=singlePage><header><h1 id=page-title><a href=https://Oscilllator.github.io/quartz/>Harry dB notes</a></h1><div class=spacer></div><div id=search-icon><p>Search</p><svg tabindex="0" aria-labelledby="title desc" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 19.9 19.7"><title id="title">Search Icon</title><desc id="desc">Icon to open search</desc><g class="search-path" fill="none"><path stroke-linecap="square" d="M18.5 18.3l-5.4-5.4"/><circle cx="8" cy="8" r="7"/></g></svg></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><p class=meta>Last updated
Unknown
<a href=https://github.com/jackyzha0/quartz/tree/hugo/content/20240208%20plasma%20toroid.md rel=noopener>Edit Source</a></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#back-to-the-circuit>Back to the circuit</a></li><li><a href=#zero-voltage-switching-zvs-simulation>Zero voltage switching (ZVS) simulation</a><ol><li><a href=#puzzling-observation-1>puzzling observation 1</a></li></ol></li><li><a href=#new-circuit>New circuit</a></li><li><a href=#the-drain-at-open-loop>The drain at open loop.</a></li><li><a href=#impedance>Impedance</a></li><li><a href=#voltage-in-the-middle-of-the-tank-circuit>Voltage in the middle of the tank circuit</a></li><li><a href=#pulse-train>Pulse train</a></li></ol><ol><li><ol><li><a href=#beginning-of-the-turn-on>Beginning of the turn-on</a></li><li><a href=#high-drain-voltage>High drain voltage:</a></li><li><a href=#low-drain-voltage>Low drain voltage</a></li></ol></li></ol></nav></details></aside><p>Trying to build a plasma toroid following this guide:</p><p><a href=https://docs.google.com/document/d/1AyaO-RaTiaOmyT3-89UxPdrMHEBCCrxb1irZKsVMg_8/edit rel=noopener>https://docs.google.com/document/d/1AyaO-RaTiaOmyT3-89UxPdrMHEBCCrxb1irZKsVMg_8/edit</a>
<a href=https://docs.google.com/document/d/1-jMPQOSs6-Flp181TTa8cNMSs2XumzDEahg9DVD0hKk/edit rel=noopener>https://docs.google.com/document/d/1-jMPQOSs6-Flp181TTa8cNMSs2XumzDEahg9DVD0hKk/edit</a></p><p>Here is the circuit in LT spice:</p><p><img src="/quartz/Pasted image 20240208194901.png" width=auto></p><p>My transistor is a CS9N90 (lcsc special):</p><p><img src="/quartz/Pasted image 20240208195012.png" width=auto></p><p>My capacitors are only rated to 50V, and so I get a squealing noise, but the circuit does oscillate:</p><p><img src="/quartz/Pasted image 20240208195058.png" width=auto></p><p>I wonder why it only oscillates for a while&mldr; possibly it is the high voltage on the caps (150V!) that causes them to be lower in capacitance and stop the oscillation.</p><p>After making a bunch of adjustments and the squealing noise mysteriously disappearing the oscillator seems to work fine:
<img src="/quartz/Pasted image 20240209184425.png" width=auto>
Here I have changed the probing though - it seems that just using a divider does not work very well in this situation for some reason.</p><ul><li>Yellow is the drain of the FET, probed with the clippy bit of a scope probe.</li><li>Blue is the gate of the FET probed with the clippy bit attached to a 3cm piece of wire hanging off the gate.</li><li>Green is the gate of the FET probed using a springen sproingen - clearly way better signal integrity.
If this oscillator is going to work as it should then there needs to be zero voltage switching of the FET and so good measurements of the drain and the gate are necessary. So I need to make some high voltage probes.</li></ul><a href=#500r-transmission-line><h1 id=500r-transmission-line><span class=hanchor arialabel=Anchor># </span>500R transmission line</h1></a><p>I just learned that the way that 10x oscilloscope probes work is that they have a special lossy transmission line inside them to do the impedance matching between the 9M probe tip and the 1M scope input.</p><p>Here is a video on the topic:
<a href="https://www.youtube.com/watch?v=OiAmER1OJh4" rel=noopener>https://www.youtube.com/watch?v=OiAmER1OJh4</a></p><p>If one could make a 10kR transmission line though, you could have a 10k resistance at the scope and a 1M resistance at the probe tip, and then everything would be all matched and work fine.</p><p>Looking at the impedance calculator website
<a href=https://www.allaboutcircuits.com/tools/twisted-pair-impedance-calculator/ rel=noopener>here</a>, it seems that a 500R transmission line is easily achievable (0.22mm diameter wire wrapped about 5mm diameter insulator) but that going higher is very difficult, on acccount of the log here:</p><p><img src="/quartz/Pasted image 20240210121956.png" width=auto></p><p>The test setup is to run a square wave out of the signal generator and terminate it at a pcb with a 50R resistor. From there a 500R resistor takes it into the 500R twisted pair line, and a 500R terminating resistor at the scope (with its 1M input impedance).</p><p>Here is what it looks like all wound up:</p><p><img src="/quartz/Pasted image 20240210122924.png" width=auto></p><p><img src="/quartz/Pasted image 20240210122351.png" width=auto></p><p>Here the reference trace is the 500R line, the green trace is the 50R resistor probed with a normal 10x probe, and the yellow is a standard 50R coax line. I was hoping to see some reflections off the coax line, but I guess not :(</p><p>Changing the probing resistor to 50kR gives this:</p><p><img src="/quartz/Pasted image 20240210141559.png" width=auto></p><p>&mldr;There seems to be too much noise pickup for anything useful. When I turn on the toroid oscillator it&rsquo;s totally unusable.</p><a href=#back-to-the-circuit><h2 id=back-to-the-circuit><span class=hanchor arialabel=Anchor># </span>Back to the circuit</h2></a><p>I went to Home depot and bought a circular fluorescent bulb. The bulb lit up! Then I took apart the circuit and put it back together again. It looks like it is performing much better now:</p><p><img src="/quartz/Pasted image 20240210181235.png" width=auto></p><ul><li>Ref: drain (the nice pulse)</li><li>Green: gate of the FET</li><li>yellow: some resistor sticking out of one channel of the scope that I am using to trigger.
So I am getting pulses at 120V! But now the fluorescent bulb no longer lights up :(. The big rf coil is next to a large aluminium heatsink though, I wonder if it is somehow reacting with that and losing energy.</li></ul><a href=#zero-voltage-switching-zvs-simulation><h2 id=zero-voltage-switching-zvs-simulation><span class=hanchor arialabel=Anchor># </span>Zero voltage switching (ZVS) simulation</h2></a><p>I found
<a href=https://docs.google.com/document/d/12zzin_l4TYB7Etak3atULsMw10s3H--E5xJSFTTWbV8/edit rel=noopener>another</a> good document about the operation of ZVS. Here is what is has to say on the topic of ZVS:
<img src="/quartz/Pasted image 20240212074546.png" width=auto></p><p>And here is the operation of the circuit in LT spice:</p><p><img src="/quartz/Pasted image 20240212074901.png" width=auto></p><p>What I do not understand here is when the MOSFET goes open. It clearly happens when the gate voltage is just starting to rise up to around 0. But is this because of ZVS, or because that&rsquo;s just how MOSFET&rsquo;s work so of course that happened/</p><a href=#puzzling-observation-1><h3 id=puzzling-observation-1><span class=hanchor arialabel=Anchor># </span>puzzling observation 1</h3></a><p><img src="/quartz/Pasted image 20240212081310.png" width=auto></p><p>circuit at the time of the above screenshot;
<img src="/quartz/Pasted image 20240212081358.png" width=auto></p><a href=#new-circuit><h2 id=new-circuit><span class=hanchor arialabel=Anchor># </span>New circuit</h2></a><p>I made a new circuit that looks like this:
<img src="/quartz/Pasted image 20240219213949.png" width=auto></p><p>where the FET can be driven open loop - the feedback path is closed. That way hopefully we can observe what the actual resonant frequencies are and check that ZVS is a thing.</p><a href=#the-drain-at-open-loop><h2 id=the-drain-at-open-loop><span class=hanchor arialabel=Anchor># </span>The drain at open loop.</h2></a><p>Probing the drain of the FET looks like this:</p><p><img src="/quartz/Pasted image 20240219200610.png" width=auto></p><p>Which is 1MHz - far below the supposed 10MHz of the tank circuit!</p><a href=#impedance><h2 id=impedance><span class=hanchor arialabel=Anchor># </span>Impedance</h2></a><p>Here is the impedance of the big coil and the 130p cap tank circuit:</p><p><img src="/quartz/Pasted image 20240219213023.png" width=auto></p><p>which looks absolutely perfect - 0 resistance at 11Mhz. Since the tank circuit is disconnected from the main circuit I took the liberty of probing the drain of the FET without the tank circuit attached and got the exact same measurement - so I guess what is happening here is the input choke is forming a tank with the FET capacitance.</p><a href=#voltage-in-the-middle-of-the-tank-circuit><h2 id=voltage-in-the-middle-of-the-tank-circuit><span class=hanchor arialabel=Anchor># </span>Voltage in the middle of the tank circuit</h2></a><p>Here I have added the main inductor and capacitor back in, and am probing in between the inductor and capacitor:
<img src="/quartz/Pasted image 20240220194627.png" width=auto>
That looks much more correct.</p><a href=#pulse-train><h2 id=pulse-train><span class=hanchor arialabel=Anchor># </span>Pulse train</h2></a><p>It turns out if you drive the MOSFET driver at 10MHz with this kind of load it burns out after a few 10s of seconds. So I set up the signal generator to generate a pulse train. Here I have tried pulse trains of frequency 10, 11, 12MHz around the resonant frequency of 11.3MHz.</p><p><img src="/quartz/Pasted image 20240222075543.png" width=auto></p><p>So we can see here that being close to resonance is important. how utterly unsurprising.</p><a href=#longer-turn-on><h1 id=longer-turn-on><span class=hanchor arialabel=Anchor># </span>Longer turn-on</h1></a><p>Here I replaced the FET with a IPA60R080P, which has about half the input capacitance. that makes the waveform at the gate look somewhat sensible. Here is a 1000 cycle turnon transient at 11.3MHz:</p><p><img src="/quartz/Pasted image 20240222212138.png" width=auto></p><ul><li>Yellow: gate waveform</li><li>Green: AWG</li><li>Cyan: drain</li><li>purple: between inductor and capacitor.
The oscillations in the maximum amplitude of the drain and the resonance circuit are real, and I think that might be some oscillating phase shifts as it gets closer and further away from ZVS. Let&rsquo;s zoom in:</li></ul><a href=#beginning-of-the-turn-on><h3 id=beginning-of-the-turn-on><span class=hanchor arialabel=Anchor># </span>Beginning of the turn-on</h3></a><p>The phase shifts look like this:</p><p><img src="/quartz/Pasted image 20240222212344.png" width=auto></p><p>So you can see there is about a 25ns delay between when the gate driver goes high (yellow) and when the drain goes low, and a 50ns delay between when the driver goes high and the voltage at the cap starts to drop.</p><a href=#high-drain-voltage><h3 id=high-drain-voltage><span class=hanchor arialabel=Anchor># </span>High drain voltage:</h3></a><p><img src="/quartz/Pasted image 20240222212622.png" width=auto></p><a href=#low-drain-voltage><h3 id=low-drain-voltage><span class=hanchor arialabel=Anchor># </span>Low drain voltage</h3></a><p><img src="/quartz/Pasted image 20240222212705.png" width=auto></p></article><hr><div class=page-end id=footer><div class=backlinks-container><h3>Backlinks</h3><ul class=backlinks><li><a href=/quartz// data-ctx="20240208 plasma toroid.md" data-src=/ class=internal-link>Harry dB notes</a></li><li><a href=/quartz/20240306-plasma-toroid-2/ data-ctx=previously data-src=/20240306-plasma-toroid-2 class=internal-link></a></li></ul></div><div><script src=https://cdn.jsdelivr.net/npm/d3@6.7.0/dist/d3.min.js integrity="sha256-+7jaYCp29O1JusNWHaYtgUn6EhuP0VaFuswhNV06MyI=" crossorigin=anonymous></script><h3>Interactive Graph</h3><div id=graph-container></div><style>:root{--g-node:var(--secondary);--g-node-active:var(--primary);--g-node-inactive:var(--visited);--g-link:var(--outlinegray);--g-link-active:#5a7282}</style><script src=https://Oscilllator.github.io/quartz/js/graph.abd4bc2af3869a96524d7d23b76152c7.js></script></div></div><div id=contact_buttons><footer><p>Made by Harry dB using <a href=https://github.com/jackyzha0/quartz>Quartz</a>, © 2025</p><ul><li><a href=https://Oscilllator.github.io/quartz/>Home</a></li></ul></footer></div></div></body></html>